{"version":3,"sources":["02-molecules/menus/main-menu/main-menu.js"],"names":["a11yMenubar","document","_keyCode","_id","_domObj","_hoverintent","_ariaLabel","_navElem","getElementById","_menubarMenuitems","_currentMenubarIndex","_currentMenuitem","setAttribute","classList","add","querySelector","handleMouseoutMenubar","bind","options","timeout","interval","addEventListener","children","length","firstChild","handleKeydownMenubar","querySelectorAll","handleKeydownSubmenu","parentNode","textContent","handleMouseoverMenuitem","defaultPrevented","target","normalizeKey","key","keyCode","SPACE","ENTER","ARROW_DOWN","closeAllSubmenus","openSubmenu","focus","updateCurrentMenuitem","ARROW_RIGHT","ARROW_LEFT","ARROW_UP","lastElementChild","firstElementChild","HOME","END","stopPropagation","preventDefault","click","ESC","closeSubmenu","hasSubmenu","contains","nextElementSibling","previousElementSibling","closeSiblingSubmenus","remove","push","TAB"],"mappings":"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","file":"main-menu.js","sourcesContent":["/**\n * @file a11yMenubar.js\n */\n\nclass a11yMenubar {\n\n  constructor(id, domObj=document, ariaLabel='', hoverintent=hoverintent) {\n    // Define members.\n    this._keyCode = {\n      'TAB':      9,\n      'ENTER':    13,\n      'ESC':      27,\n      'SPACE':    32,\n      'END':      35,\n      'HOME':     36,\n      'ARROW_LEFT':     37,\n      'ARROW_UP':       38,\n      'ARROW_RIGHT':    39,\n      'ARROW_DOWN':     40,\n    };\n\n    this._id = id;\n    this._domObj = domObj;\n    this._hoverintent = hoverintent;\n    this._ariaLabel = ariaLabel;\n    this._navElem = this._domObj.getElementById(this._id);\n    this._menubarMenuitems = [];\n    this._currentMenubarIndex = 0;\n    this._currentMenuitem = null;\n\n    // TODO: Add configurable defaults for class names.\n\n    // TODO: Add aria-orientation attribute.\n\n    // Set up aria roles and attributes.\n    this._navElem.setAttribute('aria-label', this._ariaLabel);\n    this._navElem.classList.add('a11y-menubar');\n\n    let menubar = this._navElem.querySelector('ul');\n\n    menubar.setAttribute('role', 'menubar');\n    menubar.setAttribute('aria-label', this._ariaLabel);\n\n    // Add hoverintent functionality (or mouse events if hoverintent not available).\n    if (this._hoverintent) {\n      // Hoverintent in environment.\n      let options = {\n        timeout: 900,\n        interval: 50\n      };\n\n      this._hoverintent(\n          menubar,\n          function (event) {},\n          this.handleMouseoutMenubar.bind(this)\n      ).options(options);\n    }\n    else {\n      // Default mouse events.\n      menubar.addEventListener('mouseout', this.handleMouseoutMenubar.bind(this));\n    }\n\n    // For menubar menuitems specifically.\n    let menubarMenuitems = menubar.children;\n\n    for (let i = 0; i < menubarMenuitems.length; i++) {\n      let menubarMenuitem = menubarMenuitems[i].firstChild;\n      menubarMenuitem.classList.add('a11y-menubar-menuitem');\n\n      // collect these as an Array or something and store in the class.\n      this._menubarMenuitems[i] = menubarMenuitem;\n\n      // Add keydown handler (bound to a11yMenubar instance).\n      menubarMenuitem.addEventListener('keydown', this.handleKeydownMenubar.bind(this));\n    }\n\n    // Add keydown handler to submenu menuitems (bound to a11yMenubar instance).\n    let submenuMenuitems = this._navElem.querySelectorAll('a + ul > li > a');\n\n    for (let i = 0; i < submenuMenuitems.length; i++) {\n      submenuMenuitems[i].addEventListener('keydown', this.handleKeydownSubmenu.bind(this));\n    }\n\n    // Attributes for all menuitems.\n    let menuitems = menubar.querySelectorAll('li > a');\n\n    for (let j = 0; j < menuitems.length; j++) {\n      menuitems[j].setAttribute('role', 'menuitem');\n      menuitems[j].setAttribute('tabindex', '-1');\n\n      // Check for submenus.\n      let liElem = menuitems[j].parentNode;\n      let submenus = liElem.querySelectorAll('a + ul');\n\n      for (let k = 0; k < submenus.length; k++) {\n        // Get aria-label from anchor sibing.\n        let submenuLiElem = submenus[k].parentNode;\n        let aElem = submenuLiElem.querySelector('a');\n        let aElemText = aElem.textContent;\n\n        aElem.setAttribute('aria-haspopup', 'true');\n        aElem.setAttribute('aria-expanded', 'false');\n\n        submenus[k].setAttribute('role', 'menu');\n        submenus[k].setAttribute('aria-label', aElemText);\n        submenus[k].classList.add('a11y-menubar-menu-closed');\n      }\n\n      // Add hoverintent functionality (or mouse events if hoverintent not available).\n      if (this._hoverintent) {\n        // Hoverintent in environment.\n        let options = {\n          timeout: 100,\n          interval: 0\n        };\n\n        this._hoverintent(\n            menuitems[j],\n            this.handleMouseoverMenuitem.bind(this),\n            function (event) {}\n        ).options(options);\n      }\n      else {\n        // Default mouse events.\n        menuitems[j].addEventListener('mouseover', this.handleMouseoverMenuitem.bind(this));\n      }\n    }\n\n    // All li elements should have an aria role of \"none\".\n    let liElem = menubar.querySelectorAll('li');\n\n    for (let l = 0; l < liElem.length; l++) {\n      liElem[l].setAttribute('role', 'none');\n    }\n\n    // First menubar menuitem should have tabindex 0.\n    this._menubarMenuitems[0].setAttribute('tabindex', '0');\n\n    // First menubar menuitem should be the current menuitem.\n    this._currentMenuitem = this._menubarMenuitems[0];\n\n  }\n\n  destroy () {\n    // Remove all attributes/behaviors, etc. from constructor.\n  }\n\n  // Event Handlers -----------------------------------------------------\n\n  handleKeydownMenubar (event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    let preventDefault = false; // Flag to prevent the keypress from doing what it usually would do.\n    let menuitem = event.target;\n    let key = this.normalizeKey(event.key || event.keyCode);\n\n    if (key == this._keyCode.SPACE || key == this._keyCode.ENTER || key == this._keyCode.ARROW_DOWN) {\n      // Opens submenu and moves focus to first item in the submenu.\n      this.closeAllSubmenus();\n      this.openSubmenu(menuitem);\n      let firstMenuitem = menuitem.parentNode.querySelector('ul[role=menu] > li > a[role=menuitem]');\n\n      if (firstMenuitem != null) {\n        firstMenuitem.focus();\n        this.updateCurrentMenuitem(firstMenuitem);\n      }\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ARROW_RIGHT) {\n      /*\n        -Moves focus to the next item in the menubar.\n        -If focus is on the last item, moves focus to the first item.\n       */\n      let nextMenubarIndex = (this._currentMenubarIndex + 1 >= this._menubarMenuitems.length) ? 0 : this._currentMenubarIndex + 1;\n      let nextMenubarItem = this._menubarMenuitems[nextMenubarIndex];\n\n      nextMenubarItem.focus();\n      this._currentMenubarIndex = nextMenubarIndex;\n      this.updateCurrentMenuitem(nextMenubarItem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ARROW_LEFT) {\n      /*\n        -Moves focus to the previous item in the menubar.\n        -If focus is on the first item, moves focus to the last item.\n       */\n      let prevMenubarIndex = (this._currentMenubarIndex - 1 < 0) ? this._menubarMenuitems.length - 1 : this._currentMenubarIndex - 1;\n      let prevMenubarItem = this._menubarMenuitems[prevMenubarIndex];\n\n      prevMenubarItem.focus();\n      this._currentMenubarIndex = prevMenubarIndex;\n      this.updateCurrentMenuitem(prevMenubarItem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ARROW_UP) {\n      // Opens submenu and moves focus to last item in the submenu.\n      this.openSubmenu(menuitem);\n      let lastMenuitem = menuitem.parentNode.querySelector('ul[role=menu]').lastElementChild.firstElementChild;\n      lastMenuitem.focus();\n      this.updateCurrentMenuitem(lastMenuitem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.HOME) {\n      // Moves focus to first item in the menubar.\n      let firstMenubarItem = this._menubarMenuitems[0];\n      firstMenubarItem.focus();\n      this.updateCurrentMenuitem(firstMenubarItem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.END) {\n      // Moves focus to last item in the menubar.\n      let lastMenubarItem = this._menubarMenuitems[this._menubarMenuitems.length - 1];\n      lastMenubarItem.focus();\n      this.updateCurrentMenuitem(lastMenubarItem);\n      preventDefault = true;\n    }\n    else {\n      // TODO: Consider adding optional character handling.\n    }\n\n    if (preventDefault) {\n      // The following statements will stop the keys from doing stuff.\n      event.stopPropagation();\n      event.preventDefault();\n    }\n\n  }\n\n  handleKeydownSubmenu (event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    let preventDefault = false; // Flag to prevent the keypress from doing what it usually would do.\n    let menuitem = event.target;\n    let key = this.normalizeKey(event.key || event.keyCode);\n\n    if (key == this._keyCode.SPACE || key == this._keyCode.ENTER) {\n      // Activates menu item, causing the link to be activated.\n      menuitem.click();\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ESC) {\n      /*\n        -Closes submenu.\n        -Moves focus to parent menubar item.\n       */\n      let parentMenuitem = menuitem.parentNode.parentNode.parentNode.querySelector('a[role=menuitem]');\n      this.closeSubmenu(parentMenuitem);\n      parentMenuitem.focus();\n      this.updateCurrentMenuitem(parentMenuitem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ARROW_RIGHT) {\n      /*\n        -If focus is on an item with a submenu, opens the submenu and places focus on the first item.\n        -If focus is on an item that does not have a submenu:\n            -Closes submenu.\n            -Moves focus to next item in the menubar.\n            -Opens submenu of newly focused menubar item, keeping focus on that parent menubar item.\n       */\n      if (this.hasSubmenu(menuitem)) {\n        let firstSubmenuItem = menuitem.parentNode.querySelector('a + ul').querySelector('li > a');\n        this.openSubmenu(menuitem);\n        firstSubmenuItem.focus();\n        this.updateCurrentMenuitem(firstSubmenuItem);\n      }\n      else {\n        this.closeAllSubmenus();\n\n        let nextMenubarIndex = (this._currentMenubarIndex + 1 >= this._menubarMenuitems.length) ? 0 : this._currentMenubarIndex + 1;\n        let nextMenubarItem = this._menubarMenuitems[nextMenubarIndex];\n\n        nextMenubarItem.focus();\n        this.openSubmenu(nextMenubarItem);\n        this._currentMenubarIndex = nextMenubarIndex;\n        this.updateCurrentMenuitem(nextMenubarItem);\n      }\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ARROW_LEFT) {\n      /*\n        -Closes submenu and moves focus to parent menu item.\n        -If parent menu item is in the menubar, also:\n            -moves focus to previous item in the menubar.\n            -Opens submenu of newly focused menubar item, keeping focus on that parent menubar item.\n       */\n      let submenuParentMenuitem = menuitem.parentNode.parentNode.parentNode.querySelector('a[role=menuitem]');\n      this.closeSubmenu(submenuParentMenuitem);\n      submenuParentMenuitem.focus();\n      this.updateCurrentMenuitem(submenuParentMenuitem);\n\n      if (this._currentMenuitem.classList.contains('a11y-menubar-menuitem')) {\n        let prevMenubarIndex = (this._currentMenubarIndex - 1 < 0) ? this._menubarMenuitems.length - 1 : this._currentMenubarIndex - 1;\n        let prevMenubarItem = this._menubarMenuitems[prevMenubarIndex];\n\n        prevMenubarItem.focus();\n        this.openSubmenu(prevMenubarItem);\n        this._currentMenubarIndex = prevMenubarIndex;\n        this.updateCurrentMenuitem(prevMenubarItem);\n      }\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ARROW_DOWN) {\n      /*\n        -Moves focus to the next item in the submenu.\n        -If focus is on the last item, moves focus to the first item.\n       */\n      let nextSubmenuItem = undefined;\n      let nextSubmenuLiElem = menuitem.parentNode.nextElementSibling;\n      if (nextSubmenuLiElem == null) {\n        nextSubmenuItem = menuitem.parentNode.parentNode.firstElementChild.querySelector('a');\n      }\n      else {\n        nextSubmenuItem = nextSubmenuLiElem.querySelector('a');\n      }\n      nextSubmenuItem.focus();\n      this.updateCurrentMenuitem(nextSubmenuItem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.ARROW_UP) {\n      /*\n        -Moves focus to previous item in the submenu.\n        -If focus is on the first item, moves focus to the last item.\n      */\n      let prevSubmenuItem = undefined;\n      let prevSubmenuLiElem = menuitem.parentNode.previousElementSibling;\n      if (prevSubmenuLiElem == null) {\n        prevSubmenuItem = menuitem.parentNode.parentNode.lastElementChild.querySelector('a');\n      }\n      else {\n        prevSubmenuItem = prevSubmenuLiElem.querySelector('a');\n      }\n      prevSubmenuItem.focus();\n      this.updateCurrentMenuitem(prevSubmenuItem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.HOME) {\n      // Moves focus to the first item in the submenu.\n      let firstSubmenuItem = menuitem.parentNode.parentNode.firstElementChild.querySelector('a');\n      firstSubmenuItem.focus();\n      this.updateCurrentMenuitem(firstSubmenuItem);\n      preventDefault = true;\n    }\n    else if (key == this._keyCode.END) {\n      // Moves focus to the last item in the submenu.\n      let lastSubmenuItem = menuitem.parentNode.parentNode.lastElementChild.querySelector('a');\n      lastSubmenuItem.focus();\n      this.updateCurrentMenuitem(lastSubmenuItem);\n      preventDefault = true;\n    }\n    else {\n      // TODO: Consider adding optional printable character handling.\n    }\n\n    if (preventDefault) {\n      // The following statements will stop the keys from doing stuff.\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n\n  handleMouseoverMenuitem (event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    let menuitem = event.target;\n\n    if (this.hasSubmenu(menuitem)) {\n      this.openSubmenu(menuitem);\n    }\n\n    this.closeSiblingSubmenus(menuitem);\n  }\n\n  handleMouseoutMenubar (event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    let menubar = event.target;\n\n    this.closeAllSubmenus();\n  }\n\n  // Utility functions -----------------------------------------------\n\n  updateCurrentMenuitem (newMenuitem) {\n    this._currentMenuitem.setAttribute('tabindex', '-1');\n    this._currentMenuitem = newMenuitem;\n    this._currentMenuitem.setAttribute('tabindex', '0');\n  }\n\n  hasSubmenu (menuitem) {\n    let liElem = menuitem.parentNode;\n    let menu = liElem.querySelector('a + ul');\n    let response = (menu == null) ? false : true;\n\n    return response;\n  }\n\n  openSubmenu (menuitem) {\n    let liElem = menuitem.parentNode;\n    let menu = liElem.querySelector('ul');\n\n    // Only open submenu if it exists.\n    if (menu != null) {\n      menu.classList.remove('a11y-menubar-menu-closed');\n      menu.classList.add('a11y-menubar-menu-open');\n      menuitem.setAttribute('aria-expanded', 'true');\n    }\n  }\n\n  closeSubmenu (menuitem) {\n    let liElem = menuitem.parentNode;\n    let menu = liElem.querySelector('ul');\n\n    // Only close submenu if it exists.\n    if (menu != null) {\n      menu.classList.remove('a11y-menubar-menu-open');\n      menu.classList.add('a11y-menubar-menu-closed');\n      menuitem.setAttribute('aria-expanded', 'false');\n    }\n  }\n\n  closeSiblingSubmenus (menuitem) {\n    let ulElem = menuitem.parentNode.parentNode;\n    let siblings = ulElem.querySelectorAll('li > a[role=menuitem]');\n    let siblingsArray = [];\n\n    // Remove menuitem from siblings.\n    for (let i = 0; i < siblings.length; i++) {\n      if (siblings[i] !== menuitem) {\n        siblingsArray.push(siblings[i]);\n      }\n    }\n\n    for (let j = 0; j < siblingsArray.length; j++) {\n      this.closeSubmenu(siblingsArray[j]);\n    }\n  }\n\n  closeAllSubmenus() {\n    // Closes all currently open submenus.\n    let openSubmenus = this._navElem.querySelectorAll('ul.a11y-menubar-menu-open');\n\n    for (let i = 0; i < openSubmenus.length; i++) {\n      let aElem = openSubmenus[i].parentNode.querySelector('a');\n      aElem.setAttribute('aria-expanded', 'false');\n      openSubmenus[i].classList.remove('a11y-menubar-menu-open');\n      openSubmenus[i].classList.add('a11y-menubar-menu-closed');\n    }\n  }\n\n  normalizeKey (key) {\n    let normalizedKey = null;\n\n    switch (key) {\n      case 'Tab':\n      case 9:\n        normalizedKey = this._keyCode.TAB;\n        break;\n\n      case 'Enter':\n      case 13:\n        normalizedKey = this._keyCode.ENTER;\n        break;\n\n      case 'Escape':\n      case 'Esc':\n      case 13:\n        normalizedKey = this._keyCode.ESC;\n        break;\n\n      case ' ':\n      case 32:\n        normalizedKey = this._keyCode.SPACE;\n        break;\n\n      case 'End':\n      case 35:\n        normalizedKey = this._keyCode.END;\n\n      case 'Home':\n      case 36:\n        normalizedKey = this._keyCode.HOME;\n        break;\n\n      case 'ArrowLeft':\n      case 37:\n        normalizedKey = this._keyCode.ARROW_LEFT;\n        break;\n\n      case 'ArrowUp':\n      case 38:\n        normalizedKey = this._keyCode.ARROW_UP;\n        break;\n\n      case 'ArrowRight':\n      case 39:\n        normalizedKey = this._keyCode.ARROW_RIGHT;\n        break;\n\n      case 'ArrowDown':\n      case 40:\n        normalizedKey = this._keyCode.ARROW_DOWN;\n        break;\n    }\n\n    return normalizedKey;\n  }\n\n};\n"]}